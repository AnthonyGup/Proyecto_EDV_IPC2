<div class="container-fluid py-4" style="background-color: #0f172a; min-height: 100vh;">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">
      <div class="card bg-dark text-light border-secondary">
        <div class="card-header" style="background-color: #111827; border-bottom: 1px solid #374151;">
          <h2 class="mb-0">Crear videojuego</h2>
        </div>
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="submit()">
            <input type="hidden" formControlName="companyId" />
            
            <div class="mb-3">
              <label class="form-label">Compañía</label>
              <div class="p-2 rounded" style="background-color: #1f2937; color: #9ca3af;">
                {{ companyName || '—' }}
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Nombre</label>
                <input type="text" class="form-control bg-dark text-light border-secondary" formControlName="name" placeholder="Nombre del juego" />
                <small class="text-danger" *ngIf="f['name']?.touched && f['name']?.invalid">El nombre es obligatorio.</small>
              </div>

              <div class="col-md-3 mb-3">
                <label class="form-label">Precio</label>
                <input type="number" class="form-control bg-dark text-light border-secondary" formControlName="price" min="0" step="0.01" />
                <small class="text-danger" *ngIf="f['price']?.touched && f['price']?.invalid">Precio inválido.</small>
              </div>

              <div class="col-md-3 mb-3">
                <label class="form-label">Fecha de lanzamiento</label>
                <input type="date" class="form-control bg-dark text-light border-secondary" formControlName="relasedate" />
                <small class="text-danger" *ngIf="f['relasedate']?.touched && f['relasedate']?.invalid">Fecha requerida.</small>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Descripción</label>
              <textarea class="form-control bg-dark text-light border-secondary" formControlName="description" rows="4" placeholder="Descripción del juego"></textarea>
              <small class="text-danger" *ngIf="f['description']?.touched && f['description']?.invalid">La descripción es obligatoria.</small>
            </div>

            <div class="mb-3">
              <label class="form-label">Requisitos mínimos</label>
              <textarea class="form-control bg-dark text-light border-secondary" formControlName="minimRequirements" rows="3" placeholder="CPU, RAM, GPU..."></textarea>
              <small class="text-danger" *ngIf="f['minimRequirements']?.touched && f['minimRequirements']?.invalid">Campo requerido.</small>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Restricción de edad</label>
                <input type="number" class="form-control bg-dark text-light border-secondary" formControlName="ageRestriction" min="0" />
                <small class="text-danger" *ngIf="f['ageRestriction']?.touched && f['ageRestriction']?.invalid">Campo requerido.</small>
              </div>

              <div class="col-md-6 mb-3">
                <div class="form-check mt-4">
                  <input type="checkbox" class="form-check-input" formControlName="available" id="available" />
                  <label class="form-check-label" for="available">Disponible</label>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Categorías</label>
              <div class="d-flex flex-wrap gap-2">
                <div class="form-check" *ngFor="let cat of categories">
                  <input type="checkbox" class="form-check-input" (change)="toggleCategory(cat.categoryId, $event.target.checked)" id="cat-{{cat.categoryId}}" />
                  <label class="form-check-label" for="cat-{{cat.categoryId}}">{{ cat.name }}</label>
                </div>
              </div>
              <small class="text-secondary">Opcional: selecciona una o más categorías.</small>
            </div>

            <div class="mb-4">
              <label class="form-label">Imágenes</label>
              <input type="file" class="form-control bg-dark text-light border-secondary" (change)="onFilesSelected($event)" multiple accept="image/*" />
              <div class="mt-2" *ngIf="files.length">
                <small class="badge bg-primary me-1" *ngFor="let f of files">{{ f.name }}</small>
              </div>
              <small class="text-secondary">Opcional: puedes subir múltiples imágenes.</small>
            </div>

            <div class="d-grid">
              <button type="submit" class="btn btn-primary" [disabled]="loading">{{ loading ? 'Creando...' : 'Crear juego' }}</button>
            </div>
          </form>

          <div class="alert alert-success mt-3" *ngIf="successMessage">{{ successMessage }}</div>
          <div class="alert alert-danger mt-3" *ngIf="errorMessage">{{ errorMessage }}</div>
        </div>
      </div>
    </div>
  </div>
</div>
