<div class="container-fluid p-4">
  <h3 class="text-light mb-4">Reporte de Ventas Propias</h3>
  
  <div class="mb-3 d-flex gap-2">
    <button 
      class="btn btn-primary" 
      (click)="fetch()"
      [disabled]="loading || !companyId">
      <span *ngIf="!loading">ðŸ”„ Actualizar Reporte</span>
      <span *ngIf="loading">Cargando...</span>
    </button>
    <button 
      class="btn btn-success" 
      (click)="exportToPDF()"
      [disabled]="loading || !companyId || sales.length === 0">
      <span *ngIf="!loading">ðŸ“¥ Exportar PDF</span>
      <span *ngIf="loading">Generando...</span>
    </button>
  </div>

  <div *ngIf="loading" class="alert alert-info">Cargando datos...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <div *ngIf="!loading && sales && sales.length > 0" class="table-responsive">
    <table class="table table-dark table-striped">
      <thead>
        <tr>
          <th>Juego</th>
          <th>Ventas</th>
          <th>Ingresos Brutos</th>
          <th>ComisiÃ³n (%)</th>
          <th>Ingresos Netos</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let game of sales">
          <td>{{ game.gameTitle }}</td>
          <td>{{ game.salesCount }}</td>
          <td>${{ game.totalSales | number: '1.2-2' }}</td>
          <td>{{ game.commissionPercentage | number: '1.1-1' }}%</td>
          <td>${{ game.netEarnings | number: '1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && (!sales || sales.length === 0)" class="alert alert-warning">
    No hay datos disponibles
  </div>
</div>
