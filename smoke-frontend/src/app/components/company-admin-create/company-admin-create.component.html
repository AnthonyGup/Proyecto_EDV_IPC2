<div class="container-fluid py-4" style="background-color: #0f172a; min-height: 100vh; color: #e2e8f0;">
  <div style="max-width: 640px; margin: 0 auto;">
    <div class="card bg-dark border" style="border-color: #1f2937 !important;">
      <div class="card-body">
        <h2 class="card-title text-light mb-4">Crear administrador de compañía</h2>
        <form [formGroup]="form" (ngSubmit)="submit()">
          <input type="hidden" formControlName="company_id" *ngIf="!isSystemAdmin" />
          
          <div class="mb-3" *ngIf="!isSystemAdmin">
            <label class="form-label text-light">Compañía</label>
            <div class="p-2 bg-dark text-info border border-secondary rounded">
              {{ companyName || '—' }}
            </div>
          </div>

          <div class="mb-3" *ngIf="isSystemAdmin">
            <label class="form-label text-light">Compañía <span class="text-danger">*</span></label>
            <select formControlName="company_id" class="form-select bg-dark text-light border-secondary">
              <option value="" disabled selected>{{ loadingCompanies ? 'Cargando compañías...' : 'Selecciona una compañía' }}</option>
              <option *ngFor="let company of companies" [value]="company.companyId">{{ company.name }}</option>
            </select>
            <small *ngIf="f['company_id']?.touched && f['company_id']?.invalid" class="text-danger d-block mt-1">
              Debes seleccionar una compañía.
            </small>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Email <span class="text-danger">*</span></label>
            <input type="email" formControlName="mail" class="form-control bg-dark text-light border-secondary" placeholder="admin@empresa.com" />
            <small *ngIf="f['mail']?.touched && f['mail']?.invalid" class="text-danger d-block mt-1">
              {{ f['mail']?.errors?.['required'] ? 'El email es obligatorio.' : 'Ingresa un email válido.' }}
            </small>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Nickname <span class="text-danger">*</span></label>
            <input type="text" formControlName="nickname" class="form-control bg-dark text-light border-secondary" placeholder="admin" />
            <small *ngIf="f['nickname']?.touched && f['nickname']?.invalid" class="text-danger d-block mt-1">
              {{ f['nickname']?.errors?.['required'] ? 'El nickname es obligatorio.' : 'Mínimo 3 caracteres.' }}
            </small>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Password <span class="text-danger">*</span></label>
            <input type="password" formControlName="password" class="form-control bg-dark text-light border-secondary" placeholder="••••••" />
            <small *ngIf="f['password']?.touched && f['password']?.invalid" class="text-danger d-block mt-1">
              {{ f['password']?.errors?.['required'] ? 'La contraseña es obligatoria.' : 'Mínimo 3 caracteres.' }}
            </small>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Fecha de nacimiento <span class="text-danger">*</span></label>
            <input type="date" formControlName="birthdate" class="form-control bg-dark text-light border-secondary" />
            <small *ngIf="f['birthdate']?.touched && f['birthdate']?.invalid" class="text-danger d-block mt-1">
              La fecha de nacimiento es obligatoria.
            </small>
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="loading">
            {{ loading ? 'Enviando...' : 'Crear administrador' }}
          </button>

          <div class="alert alert-success mt-3" *ngIf="successMessage">{{ successMessage }}</div>
          <div class="alert alert-danger mt-3" *ngIf="errorMessage">{{ errorMessage }}</div>
        </form>
      </div>
    </div>
  </div>
</div>
